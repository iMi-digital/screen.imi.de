<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

    <title>screen.imi.de Screensharing</title>

    <meta name="description" content="Screen Sharing"/>
    <meta name="keywords" content="WebRTC,RTCMultiConnection,Screen Sharing"/>

    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
          integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/demos/style.css">

</head>

<body>

<div class="container">
    <div class="page-header">
        <h1>Screen Sharing by iMi</h1>
    </div>


    <section class="experiment">
        <div class="make-center">
            <input type="text" id="room-id" value="abcdef">
            <button id="open-room">Bildschirm freigeben</button>
            <button id="join-room">Freigebenen Bildschirm öffnen</button>
            <button id="open-or-join-room">Auto Open Or Join Room</button>
        </div>

        <div id="videos-container"></div>


        <div class="alert alert-info alert-dismissible" role="alert">
            <span class="info-icon glyphicon glyphicon-info-sign" aria-hidden="true"></span>

            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
            <p>
                <strong>Das freigeben Ihres Bildschirms oder einzelner Fenster funktioniert nur in Chrome oder Firefox
                    mit Installation eines Plugins.</strong>
            </p>
            <p>
                <a class="btn btn-default"
                   href="https://chrome.google.com/webstore/detail/screen-capturing/ajhifddimkapgcifgcodmmfdlknahffk"
                   target="_blank">Installation für Google Chrome</a></li>
                <a class="btn btn-default"
                   href="https://www.webrtc-experiment.com/store/firefox-extension/enable-screen-capturing.xpi"
                   target="_blank">Installation für Firefox</a>
            </p>
            <p>
                <strong>Das Anschauen eines freigebenen Bildschirms funktioniert ohne Installation</strong>
            </p>
        </div>


    </section>
</div>

<!-- <script src="/RTCMultiConnection.min.js"></script> -->
<script src="/dist/rmc3.min.js"></script>

<!-- socket.io for signaling -->
<script src="/socket.io/socket.io.js"></script>

<script>
    // ......................................................
    // .......................UI Code........................
    // ......................................................

    document.getElementById('open-room').onclick = function () {
        this.disabled = true;
        connection.open(document.getElementById('room-id').value);
    };

    document.getElementById('join-room').onclick = function () {
        this.disabled = true;
        connection.join(document.getElementById('room-id').value);
    };

    document.getElementById('open-or-join-room').onclick = function () {
        this.disabled = true;
        connection.openOrJoin(document.getElementById('room-id').value);
    };

    // ......................................................
    // ..................RTCMultiConnection Code.............
    // ......................................................

    var connection = new RTCMultiConnection();

    document.getElementById('room-id').value = connection.token();

    connection.session = {
        screen: true,
        oneway: true
    };

    connection.sdpConstraints.mandatory = {
        OfferToReceiveAudio: false,
        OfferToReceiveVideo: false
    };

    var videosContainer = document.getElementById('videos-container');
    connection.onstream = function (event) {
        videosContainer.appendChild(event.mediaElement);
    };
</script>


<footer>
    <p>
        screen.imi.de <a href="http://www.imi.de/">by iMi digital GmbH</a>
    </p>
</footer>

</body>

</html>
